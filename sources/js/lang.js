const translations = {
  vi: {
    brand: "HX Wedding",
    "hero.start": "Sẽ được bắt đầu sau:",
    "hero.open": "Mở thiệp cưới",

    "menu.event": "Sự kiện",
    "menu.invite": "Thiệp mời",
    "menu.story": "Câu chuyện",
    "menu.gallery": "Album ảnh",
    "menu.video": "Video ảnh",
    "menu.message": "Lời chúc",
    "menu.gifts": "Mừng cưới",
    "menu.lang": "Ngôn ngữ",

    "event.title": "Sự Kiện Cưới",
    "event.calendar.laptop": "Được tổ chức vào Chủ Nhật, ngày 02 tháng 11 năm 2025 <br>(Tức ngày 13 tháng 09 Âm lịch)",
    "event.calendar.mobile": "Được tổ chức vào Chủ Nhật, ngày 02/11/2025 <br>(Tức ngày 13 tháng 09 Âm lịch)",
    "event.desc.laptop": "Sự hiện diện của Quý Khách là niềm vinh dự của gia đình chúng tôi.<br>Rất hân hạnh được đón tiếp!",
    "event.desc.mobile": "Sự hiện diện của Quý Khách là niềm vinh dự của gia đình chúng tôi. Rất hân hạnh được đón tiếp!",
    "event.groom": "💕 Chú Rể 💕",
    "event.bride": "💕 Cô Dâu 💕",

    "card.groom": "Thiệp cưới Nhà Trai",
    "card.bride": "Thiệp cưới Nhà Gái",
    "card.invite": "TRÂN TRỌNG KÍNH MỜI",
    "card.guest": "Quý Khách",
    "card.invite-detail": "Tới dự bữa cơm thân mật và chung vui cùng gia đình chúng tôi !",
    "card.org": "Được tổ chức",
    "card.at": "VÀO LÚC:",
    "card.date": "CHỦ NHẬT",
    "card.month": "THÁNG 11",
    "card.lunar": "(Nhằm ngày 13 tháng 09 năm Ất Tỵ)",
    "card.local-label": "Tại:",
    "card.local-groom": "Sân Khấu nhà Trai",
    "card.local-bride": "Sân Khấu nhà Gái",
    "card.groom-family": "Nhà Trai",
    "card.bride-family": "Nhà Gái",
    "card.father": "Bố:",
    "card.mother": "Mẹ:",
    "card.contact": "Liên hệ",

    "story.title": "Câu chuyện của chúng tôi",
    "story.inLove": "Quen biết",
    "story.firstMeet": "Lần gặp gỡ đầu tiên",
    "story.engage": "Về chung một nhà",
    "story.parag1": "Bắt đầu là những dòng tin nhắn kèm theo đó là những câu chuyện đã được chúng tôi gửi cho nhau." +
                    " Qua những câu chuyện, chúng tôi cũng hiểu về nhau một phần, và quyết định tìm hiểu về nhau nhiều hơn bằng những cuộc hẹn." +
                    " Những câu chuyện thú vị đó cũng đã kéo chúng tôi lại gần với nhau hơn.",
    "story.parag2": "Đó là một buổi tối mùa đông, trong không gian cổ điển của một quán cà phê với những cuốn sách được bày ngay ngắn trên giá." +
                    " Em mang cho tôi một chiếc bánh sinh nhật nhỏ xinh cùng những lời chúc tốt đẹp cho một tuổi mới. Một buổi tối thật lãng mạn và ý nghĩa!",
    "story.parag3": "Trải qua một thời gian đủ để chúng tôi tìm hiểu về nhau thật kỹ lưỡng, chúng tôi đã quyết định tiến thêm một bước xa hơn, đó là xây dựng gia đình với nhau." +
                    " Chúng tôi cũng nhận được sự đồng thuận từ hai bên gia đình về một mối quan hệ bền chặt, gắn bó với nhau.",

    "gallery.title": "Album Ảnh",

    "video.title": "Video Ảnh",

    "message.title": "Gửi lời chúc",
    "message.desc": "Vợ Chồng cảm ơn những lời chúc tốt đẹp của Quý Khách",
    "message.formTitle": "Gửi lời chúc",
    "message.name": "Tên của bạn *",
    "message.org": "Thuộc cơ quan/đơn vị",
    "message.relation": "Mối quan hệ với dâu/rể *",
    "message.placeholder": "-- Hãy chọn một --",
    "message.option.relatives": "Cô, dì, chú, bác",
    "message.option.siblings": "Anh, em",
    "message.option.friendGroom": "Bạn chú rể",
    "message.option.friendBride": "Bạn cô dâu",
    "message.option.friendBoth": "Bạn của dâu, rể",
    "message.option.other": "Khác",
    "message.wish": "Nhập lời chúc *",
    "message.send": "Gửi lời chúc",
    "message.view": "Xem lời chúc",

    "gifts.title": "Mừng Cưới Online",
    "gifts.desc": "Vợ chồng chân thành cảm ơn tình cảm của Quý Khách 💝",
    "gifts.congrat": "💖 Chúc Mừng Hạnh Phúc 💖",
    "gifts.send.title": "Mừng cưới dâu, rể",
    "gifts.thanks": "♥ Vợ chồng chân thành cảm ơn tình cảm của Quý Khách ♥",
    "gifts.send.groom": "MỪNG CƯỚI CHÚ RỂ",
    "gifts.send.bride": "MỪNG CƯỚI CÔ DÂU",
    "gifts.download": "Tải ảnh QR",
    "gifts.account": "Copy STK",

    "footer.text": "💖💖💖 RẤT HÂN HẠNH ĐƯỢC ĐÓN TIẾP 💖💖💖 <br> Phát triển: Phạm Trần Hoàng; Cố vấn: Trình Thị Xuân"
  },

  en: {
    brand: "HX Wedding",
    "hero.start": "Will be begun in:",
    "hero.open": "Open Invitation",

    "menu.event": "Wedding Event",
    "menu.invite": "Invitation",
    "menu.story": "Our Story",
    "menu.gallery": "Album",
    "menu.video": "Video",
    "menu.message": "Message",
    "menu.gifts": "Gifts",
    "menu.lang": "Language",

    "event.title": "Wedding Event",
    "event.calendar.laptop": "Will be organized on Sunday; 2nd November, 2025<br>(Lunar calendar on 13th September)",
    "event.calendar.mobile": "Will be organized on Sunday; 2nd November, 2025<br>(Lunar calendar on 13th September)",
    "event.desc.laptop": "Your presence is our family's greatest honor. We are delighted to welcome you!",
    "event.desc.mobile": "Your presence is our family's greatest honor. We are delighted to welcome you!",
    "event.groom": "💕 Groom 💕",
    "event.bride": "💕 Bride 💕",

    "card.groom": "Groom's Family",
    "card.bride": "Bride's Family",
    "card.invite": "Sincerely Invite",
    "card.guest": "Esteemed Guest",
    "card.invite-detail": "We warmly you to a intimate meal and a joyful celebration with our family !",
    "card.org": "Will be held",
    "card.at": "AT (TIME):",
    "card.date": "SUNDAY",
    "card.month": "NOVEMBER",
    "card.lunar": "(Lunar calendar on 13th September)",
    "card.local-label": "At:",
    "card.local-groom": "Groom's Family Hall",
    "card.local-bride": "Bride's Family Hall",
    "card.groom-family": "Groom's Family",
    "card.bride-family": "Bride's Family",
    "card.father": "Dad:",
    "card.mother": "Mom:",
    "card.contact": "Contact:",

    "story.title": "Our Love Story",
    "story.inLove": "Fall in Love",
    "story.firstMeet": "First meet",
    "story.engage": "Go home together",
    "story.parag1": "It all started with simple text messages, followed by the stories we shared with each other." +
                    " Through these conversations, we came to understand one another and decided to learn more about each other through real dates." +
                    " These wonderful stories brought us closer together.",
    "story.parag2": "It was a winter evening, in the classic atmosphere of a cozy café, where books were neatly arranged on the shelves." +
                    " You brought me a lovely little birthday cake along with your heartfelt wishes for the year ahead. A truly romantic and meaningful night!",
    "story.parag3": "After spending enough time to truly understand each other, we decided to take a further step to build a family together." +
                    " We have also received the wholehearted support from both families, blessing our strong and lasting bond.",
    
    "gallery.title": "Gallery",

    "video.title": "Wedding Video",

    "message.title": "Send Wishing",
    "message.desc": "We sincerely thank you for your kind wishes",
    "message.formTitle": "Send Your Wishes",
    "message.name": "Your Name *",
    "message.org": "Organization",
    "message.relation": "Relationship *",
    "message.placeholder": "-- Please choose one--",
    "message.option.relatives": "Home's Relationship",
    "message.option.siblings": "Cousins",
    "message.option.friendGroom": "Friend of Groom",
    "message.option.friendBride": "Friend of Bride",
    "message.option.friendBoth": "Friend of Both",
    "message.option.other": "Other",
    "message.wish": "Enter your wishes *",
    "message.send": "Send Wish",
    "message.view": "View Wishes",

    "gifts.title": "Online Wedding Gifts",
    "gifts.desc": "We sincerely appreciate your love 💝",
    "gifts.congrat": "💖 Happy Wedding ! 💖",
    "gifts.send.title": "Send Gifts online",
    "gifts.thanks": "We sincerely appreciate your love 💝",
    "gifts.send.groom": "SEND TO GROOM",
    "gifts.send.bride": "SEND TO BRIDE",
    "gifts.download": "Download QR",
    "gifts.account": "Copy account",

    "footer.text": "💖💖💖 WE ARE HONORED TO WELCOME YOU 💖💖💖 <br> Developed by: Pham Tran Hoang; Advisor: Trinh Thi Xuan"
  }
};

// =========================
// Countdown đa ngôn ngữ
// =========================
function initCountdown(lang) {
  let words = {};

  if (lang === "vi") {
    words = {
      days: { singular: "Ngày", plural: "Ngày" },
      hours: { singular: "Giờ", plural: "Giờ" },
      minutes: { singular: "Phút", plural: "Phút" },
      seconds: { singular: "Giây", plural: "Giây" },
    };
  } else {
    words = {
      days: { singular: "Day", plural: "Days" },
      hours: { singular: "Hour", plural: "Hours" },
      minutes: { singular: "Minute", plural: "Minutes" },
      seconds: { singular: "Second", plural: "Seconds" },
    };
  }

  // Clear countdown cũ trước khi render lại
  document.querySelector(".simply-countdown").innerHTML = "";

  // Khởi tạo lại countdown
  simplyCountdown(".simply-countdown", {
    year: 2025,
    month: 11,
    day: 2,
    words: words,
  });
}

// =========================
// Hàm đổi ngôn ngữ
// =========================
function setLanguage(lang) {
  // Lưu lựa chọn vào localStorage
  localStorage.setItem("lang", lang);

  // Duyệt toàn bộ element có data-i18n và cập nhật text
  document.querySelectorAll("[data-i18n]").forEach(el => {
    const key = el.getAttribute("data-i18n");
    if (translations[lang] && translations[lang][key]) {
      el.innerHTML = translations[lang][key];
    }
  });

  // Re-init countdown với ngôn ngữ mới
  initCountdown(lang);
}

// =========================
// Khởi tạo ngôn ngữ mặc định khi load trang
// =========================
document.addEventListener("DOMContentLoaded", () => {
  let lang = localStorage.getItem("lang");

  // Nếu chưa lưu thì lấy ngôn ngữ trình duyệt
  if (!lang) {
    lang = navigator.language.startsWith("vi") ? "vi" : "en";
  }

  setLanguage(lang);

  // Gắn event cho menu chọn ngôn ngữ
  document.querySelectorAll(".lang-select").forEach(item => {
    item.addEventListener("click", (e) => {
      e.preventDefault();
      const selectedLang = e.target.getAttribute("data-lang");
      setLanguage(selectedLang);
    });
  });
});
